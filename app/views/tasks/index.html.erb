<div class="page-header">
  <h1 class="page-header__title">Tasks</h1>
  <span class="page-header__subtitle txt-muted"><%= @tasks.count %> total</span>
</div>

<% if @tasks.any? %>
  <div class="table-responsive">
    <table class="table table--hover">
      <thead>
        <tr>
          <th>Status</th>
          <th>Name</th>
          <th>Due Date</th>
          <th>Contact</th>
          <th>Updated</th>
        </tr>
      </thead>
      <tbody>
        <% @tasks.each do |task| %>
          <tr>
            <td><span class="status-badge status-badge--<%= task.status %>"><%= task.status_label %></span></td>
            <td><%= link_to task.name, task %></td>
            <td class="txt-sm <%= 'txt-danger' if task.due_date && task.due_date < Date.current && task.status != 'done' %>">
              <%= task.due_date&.strftime("%b %d") %>
            </td>
            <td class="txt-sm txt-muted"><%= task.contact&.name || task.contact&.email %></td>
            <td class="txt-sm txt-muted"><%= time_ago_in_words(task.updated_at) %> ago</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <div class="empty-state">
    <p class="empty-state__message">No tasks yet.</p>
  </div>
<% end %>
